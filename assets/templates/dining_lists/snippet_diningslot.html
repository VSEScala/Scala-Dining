{% load humanize %}
{% load dining_tags %}
<div class="card border-{% if dining_list|has_joined:user %}success{% else %}primary{% endif %} mb-3">
    <div class="card-body">
        <p class="card-text">
            {# Link is made 'invisible' using text-decoration-none/text-reset. Could've also used an empty <a> tag #}
            {# but that didn't work together with Vimium Chrome extension. #}
            <a href="{% url 'slot_details' pk=dining_list.pk %}" class="stretched-link text-decoration-none text-reset">
                <i class="fas fa-user fa-fw"></i>
                {{ dining_list.owners.all|join:", " }}<br>
                <small>{{ dining_list.association }}</small>
            </a>
        </p>
        <p class="card-text">
            <i class="fas fa-utensils fa-fw"></i>
            {{ dining_list.dish }}
        </p>
        <p class="card-text">
            <i class="fas fa-clock fa-fw"></i>
            {{ dining_list.serve_time }}
        </p>
        <p class="card-text">
            <i class="fas fa-users fa-fw"></i>
            {{ dining_list.diners.count }} / {{ dining_list.max_diners }}
        </p>
        {# Joined, open or closed #}
        {% if dining_list|has_joined:user %}
            <p class="card-text text-success">You are signed up</p>
        {% elif dining_list.is_open %}
            <p class="card-text text-success">
                {# I learned something interesting here, you should apparently never convert a datetime to a date or time: #}
                {# https://docs.djangoproject.com/en/3.2/topics/i18n/timezones/#troubleshooting #}
                Dining list open till {{ dining_list.sign_up_deadline|naturalday }}
                {{ dining_list.sign_up_deadline|date:"TIME_FORMAT" }}
            </p>
        {% else %}
            <p class="card-text text-danger">Dining list is closed</p>
        {% endif %}
    </div>
</div>
