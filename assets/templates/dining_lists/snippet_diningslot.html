{% load form_extras %}

<div class="col-12 row mx-0 my-2 {% if interactive %}py-4 slot{% endif %}">
    <div class="col-2 slot_image"
            {% if slot.association %}
                style="background-image: url({{ slot.association.associationdetails.image.url }})"
            {% endif %}>

    </div>
    <div class="col-8">
        <div class="text-size-5">
        {% if slot.claimed_by %}
            {{ slot.claimed_by }}
        {% else %}
            Slot is unclaimed!
        {% endif %}</div>
        <div class="text-size-4">{{ slot.dish }}</div>
        <br>
        <div class="text-size-3">{{ slot.diners }}/{{ slot.max_diners }} diners</div>
    </div>

    {% if interactive %}
        {% with slot|can_join_slot:request.user as can_join %}
            {% if not slot.is_open and slot|is_on_slot:request.user %}
                <div class="col-2 slot-signed"></div>
            {% endif %}

            {% url 'slot_details' slot_id=slot.id as url%}
            <a class="slot-back btn {% if slot|is_on_slot:request.user %} slot-back-active {% endif %}
                " href="{{ url }}"></a>
            {% if can_join %}
                {% url 'entry_join' slot_id=slot.id as url%}
                <a class="btn-block col-2 btn btn-primary slot-signup" href="{{ url }}"></a>
            {% elif slot|is_on_slot:request.user and slot.is_open %}
                {% url 'entry_remove' slot_id=slot.id as url %}
                <a class="btn-block col-2 btn btn-primary slot-unlist" href="{{ url }}"></a>
            {% endif %}
        {% endwith %}
    {% endif %}
</div>